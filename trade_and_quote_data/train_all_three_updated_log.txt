================================================================================
ğŸ¯ TRAINING MODELS FOR ALL THREE MARKET CONDITIONS
================================================================================

1. ğŸ’¥ CRASHES: Sharp drops (5%+ in 3-13 days)
2. ğŸ“‰ GRADUAL PULLBACKS: Slow declines (4%+ over 15-30 days)
3. â¸ï¸  TIME CORRECTIONS: Sideways consolidation (Â±3% over 30-60 days)

================================================================================
STEP 1: LOADING DATA
================================================================================

ğŸ“Š Loading SPY data...
ğŸ“¥ Loading SPY data from 2016-01-01 to 2024-12-31...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $155.44 - $600.51
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
âœ… SPY data loaded: 2263 records
âœ… Loaded 2263 days of SPY data

ğŸ“Š Loading sector data...
ğŸ“¥ Loading 10 sector ETFs...
   Loading XLU (Utilities)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $31.52 - $80.56
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLU loaded
   Loading XLK (Technology)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $34.66 - $239.92
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLK loaded
   Loading XLV (Healthcare)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $54.01 - $153.91
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLV loaded
   Loading XLF (Financials)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $13.30 - $50.60
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLF loaded
   Loading XLE (Energy)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $18.77 - $94.14
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLE loaded
   Loading XLI (Industrials)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $40.34 - $141.81
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLI loaded
   Loading XLY (Consumer Discretionary)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $61.66 - $237.40
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLY loaded
   Loading XLP (Consumer Staples)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $37.25 - $81.62
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLP loaded
   Loading XLB (Materials)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $30.68 - $95.72
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLB loaded
   Loading XLRE (Real Estate)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $19.51 - $45.64
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… XLRE loaded
âœ… Loaded 10/10 sector ETFs
ğŸ“¥ Loading 4 rotation indicators...
   Loading MAGS (Magnificent 7)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $24.00 - $57.79
âœ… Data validation passed: 434 records from 2023-04-11 to 2024-12-30
   âœ… MAGS loaded
   Loading RSP (Equal Weight S&P 500)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $57.67 - $184.51
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… RSP loaded
   Loading QQQ (Nasdaq 100)...
ğŸ” Validating data source: yfinance
   âŒ Failed to load QQQ: âŒ FORBIDDEN: Unrealistic price range 89.70-535.28 for ROTATION_ETF (expected 10-500)
   âš ï¸  Continuing without QQQ
   Loading QQQE (Equal Weight Nasdaq 100)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $24.59 - $95.64
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… QQQE loaded
âœ… Loaded 3/4 rotation indicators
âœ… Loaded 13 sector ETFs

ğŸ“Š Loading currency data...
ğŸ’± Loading currency data...
   Loading USDJPY (JPY=X)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $99.91 - $161.62
âœ… Data validation passed: 2344 records from 2016-01-01 to 2024-12-30
   âœ… USDJPY loaded
   Loading EURUSD (EURUSD=X)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $0.96 - $1.25
âœ… Data validation passed: 2344 records from 2016-01-01 to 2024-12-30
   âœ… EURUSD loaded
   Loading DXY (UUP)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $20.00 - $29.37
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… DXY loaded
âœ… Loaded 3/3 currency pairs
âœ… Loaded 3 currency pairs

ğŸ“Š Loading volatility data...
ğŸ“Š Loading volatility data...
   Loading VIX (^VIX)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $9.14 - $82.69
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… VIX loaded
   Loading VIX9D (^VIX9D)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $7.10 - $106.66
âœ… Data validation passed: 2263 records from 2016-01-04 to 2024-12-30
   âœ… VIX9D loaded
   Loading VVIX (^VVIX)...
ğŸ” Validating data source: yfinance
   ğŸ“Š Price range: $73.26 - $207.59
âœ… Data validation passed: 2255 records from 2016-01-04 to 2024-12-30
   âœ… VVIX loaded
âœ… Loaded 3/3 volatility indices
âœ… Loaded 3 volatility indices

ğŸ“Š Loading options features...
âœ… Loaded 2264 days of options features

================================================================================
STEP 2: CREATING FEATURES
================================================================================

ğŸ“Š Creating baseline features...
================================================================================
ğŸ”§ CALCULATING FEATURES
================================================================================
Feature sets: baseline, currency, volatility
ğŸ“Š Calculating baseline features...
   âœ… Rotation indicators: 3 features
   âœ… Regime detection: 11 features
   âœ… Momentum exhaustion: 9 features
   âœ… Baseline features: 31
ğŸ’± Calculating currency features...
   âœ… Currency features: 12
ğŸ“Š Calculating volatility features...
   âœ… Volatility features: 19
ğŸ§¹ Cleaning features...
   Dropped 20 rows with missing critical features
   âœ… Clean data: 2243 records with 62 features
================================================================================
âœ… FEATURE CALCULATION COMPLETE: 62 features
================================================================================
âœ… Created 62 baseline features

ğŸ“Š Merging options features...
âœ… Added 30 new options features
   â„¹ï¸  Skipped 3 duplicate columns

âœ… Total features: 92

================================================================================
MODEL 1: CRASHES (EARLY WARNING)
================================================================================

ğŸ¯ Creating Early Warning Target
   Drawdown threshold: 5.0%
   Lead time: 3-13 days
   Lookforward window: 10 days
ğŸ¯ EARLY_WARNING TARGET CREATED
   Total samples: 2,230
   Positive samples: 408 (18.3%)
   Negative samples: 1,822 (81.7%)
   Class balance: 0.22 (1.0 = perfect balance)
ğŸ“Š Training samples: 1992 (19.5% positive)
ğŸ“Š Test samples: 114 (17.5% positive)

ğŸ”„ Training crash detection model...

âœ… CRASH MODEL: 49.9% ROC AUC
ğŸ’¾ Saved to: models/trained/crash_detection.txt

================================================================================
MODEL 2: GRADUAL PULLBACKS
================================================================================

ğŸ¯ Creating Gradual Pullback Target
   Decline threshold: 4.0%
   Lookforward window: 15-30 days
   Max daily volatility: 2.0%

ğŸ¯ GRADUAL PULLBACK TARGET CREATED
   Total samples: 2243
   Gradual pullback events: 372 (16.6%)
   No gradual pullback: 1871 (83.4%)
   Class balance: 0.17
ğŸ“Š Training samples: 1992 (17.5% positive)
ğŸ“Š Test samples: 127 (7.1% positive)

ğŸ”„ Training gradual pullback model...

âœ… GRADUAL PULLBACK MODEL: 95.7% ROC AUC
ğŸ’¾ Saved to: models/trained/gradual_pullback.txt

================================================================================
MODEL 3: TIME CORRECTIONS
================================================================================

ğŸ¯ Creating Time Correction Target
   Max range: Â±3.0%
   Lookforward window: 30-60 days
   Max absolute slope: 0.001

ğŸ¯ TIME CORRECTION TARGET CREATED
   Total samples: 2243
   Time correction events: 580 (25.9%)
   No time correction: 1663 (74.1%)
   Class balance: 0.26
ğŸ“Š Training samples: 1992 (27.1% positive)
ğŸ“Š Test samples: 127 (7.9% positive)

ğŸ”„ Training time correction model...

âœ… TIME CORRECTION MODEL: 72.5% ROC AUC
ğŸ’¾ Saved to: models/trained/time_correction.txt

================================================================================
âœ… ALL THREE MODELS TRAINED
================================================================================

1. ğŸ’¥ CRASH DETECTION:      49.9% ROC AUC
2. ğŸ“‰ GRADUAL PULLBACK:     95.7% ROC AUC
3. â¸ï¸  TIME CORRECTION:      72.5% ROC AUC

ğŸ“Š Models saved to: models/trained/
   - crash_detection.txt
   - gradual_pullback.txt
   - time_correction.txt

ğŸ¯ You now have a complete market condition detection system!

