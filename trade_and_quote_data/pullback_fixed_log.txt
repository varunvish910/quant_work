================================================================================
üîß FIXED PULLBACK MODEL
================================================================================
Improvements:
  1. Easier target: 3% pullback in 3-10 days (instead of 5% in 5-15)
  2. Feature selection: Remove low-importance features
  3. Better class balancing
  4. Probability calibration
================================================================================


================================================================================
üéØ TRAINING IMPROVED MODEL
================================================================================
================================================================================
üì• LOADING DATA
================================================================================
================================================================================
üì• LOADING ALL MARKET DATA
================================================================================
üì• Loading SPY data from 2000-01-01 to 2024-12-31...
üîç Validating data source: yfinance
   üìä Price range: $50.09 - $600.51
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
‚úÖ SPY data loaded: 6288 records
üì• Loading 10 sector ETFs...
   Loading XLU (Utilities)...
üîç Validating data source: yfinance
   üìä Price range: $6.84 - $80.56
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLU loaded
   Loading XLK (Technology)...
üîç Validating data source: yfinance
   üìä Price range: $8.64 - $239.92
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLK loaded
   Loading XLV (Healthcare)...
üîç Validating data source: yfinance
   üìä Price range: $14.91 - $153.91
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLV loaded
   Loading XLF (Financials)...
üîç Validating data source: yfinance
   üìä Price range: $3.71 - $50.60
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLF loaded
   Loading XLE (Energy)...
üîç Validating data source: yfinance
   üìä Price range: $10.51 - $94.14
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLE loaded
   Loading XLI (Industrials)...
üîç Validating data source: yfinance
   üìä Price range: $11.10 - $141.81
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLI loaded
   Loading XLY (Consumer Discretionary)...
üîç Validating data source: yfinance
   üìä Price range: $13.03 - $237.40
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLY loaded
   Loading XLP (Consumer Staples)...
üîç Validating data source: yfinance
   üìä Price range: $10.06 - $81.62
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLP loaded
   Loading XLB (Materials)...
üîç Validating data source: yfinance
   üìä Price range: $9.79 - $95.72
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ XLB loaded
   Loading XLRE (Real Estate)...
üîç Validating data source: yfinance
   üìä Price range: $19.51 - $45.64
‚úÖ Data validation passed: 2322 records from 2015-10-08 to 2024-12-30
   ‚úÖ XLRE loaded
‚úÖ Loaded 10/10 sector ETFs
üì• Loading 4 rotation indicators...
   Loading MAGS (Magnificent 7)...
üîç Validating data source: yfinance
   üìä Price range: $24.00 - $57.79
‚úÖ Data validation passed: 434 records from 2023-04-11 to 2024-12-30
   ‚úÖ MAGS loaded
   Loading RSP (Equal Weight S&P 500)...
üîç Validating data source: yfinance
   üìä Price range: $15.64 - $184.51
‚úÖ Data validation passed: 5454 records from 2003-05-01 to 2024-12-30
   ‚úÖ RSP loaded
   Loading QQQ (Nasdaq 100)...
üîç Validating data source: yfinance
   ‚ùå Failed to load QQQ: ‚ùå FORBIDDEN: Unrealistic price range 16.97-535.28 for ROTATION_ETF (expected 10-500)
   ‚ö†Ô∏è  Continuing without QQQ
   Loading QQQE (Equal Weight Nasdaq 100)...
üîç Validating data source: yfinance
   üìä Price range: $15.12 - $95.64
‚úÖ Data validation passed: 3215 records from 2012-03-21 to 2024-12-30
   ‚úÖ QQQE loaded
‚úÖ Loaded 3/4 rotation indicators
üí± Loading currency data...
   Loading USDJPY (JPY=X)...
üîç Validating data source: yfinance
   üìä Price range: $75.74 - $161.62
‚úÖ Data validation passed: 6492 records from 2000-01-03 to 2024-12-30
   ‚úÖ USDJPY loaded
   Loading EURUSD (EURUSD=X)...
üîç Validating data source: yfinance
   üìä Price range: $0.96 - $1.60
‚úÖ Data validation passed: 5472 records from 2003-12-01 to 2024-12-30
   ‚úÖ EURUSD loaded
   Loading DXY (UUP)...
üîç Validating data source: yfinance
   üìä Price range: $18.08 - $29.37
‚úÖ Data validation passed: 4490 records from 2007-03-01 to 2024-12-30
   ‚úÖ DXY loaded
‚úÖ Loaded 3/3 currency pairs
üìä Loading volatility data...
   Loading VIX (^VIX)...
üîç Validating data source: yfinance
   üìä Price range: $9.14 - $82.69
‚úÖ Data validation passed: 6288 records from 2000-01-03 to 2024-12-30
   ‚úÖ VIX loaded
   Loading VIX9D (^VIX9D)...
üîç Validating data source: yfinance
   üìä Price range: $7.10 - $106.66
‚úÖ Data validation passed: 3521 records from 2011-01-03 to 2024-12-30
   ‚úÖ VIX9D loaded
   Loading VVIX (^VVIX)...
üîç Validating data source: yfinance
   üìä Price range: $59.74 - $207.59
‚úÖ Data validation passed: 4520 records from 2007-01-03 to 2024-12-30
   ‚úÖ VVIX loaded
‚úÖ Loaded 3/3 volatility indices
================================================================================
‚úÖ ALL DATA LOADED SUCCESSFULLY
================================================================================

================================================================================
üîß FEATURE ENGINEERING
================================================================================
================================================================================
üîß CALCULATING FEATURES
================================================================================
Feature sets: baseline, currency, volatility, sectors
üìä Calculating baseline features...
   ‚úÖ Rotation indicators: 3 features
   ‚úÖ Regime detection: 11 features
   ‚úÖ Momentum exhaustion: 9 features
   ‚úÖ Baseline features: 31
üí± Calculating currency features...
   ‚úÖ Currency features: 12
üìä Calculating volatility features...
   ‚úÖ Volatility features: 19
üßπ Cleaning features...
   Dropped 20 rows with missing critical features
   ‚úÖ Clean data: 6268 records with 62 features
================================================================================
‚úÖ FEATURE CALCULATION COMPLETE: 62 features
================================================================================

üéØ Creating EASIER target (3% pullback in 3-10 days)...
üéØ Creating Pullback Prediction Target
   Pullback threshold: 3.0%
   Lookforward window: 3-10 days

üéØ PULLBACK PREDICTION TARGET CREATED
   Total samples: 6278
   Pullback events: 1741 (27.7%)
   No pullback: 4537 (72.3%)
   Class balance: 0.38

================================================================================
‚úÇÔ∏è  DATA SPLITTING
================================================================================
üìä Splitting data: Train ‚â§ 2022-12-31, Val ‚â§ 2023-12-31, Test > 2023-12-31
   Train: 5767 records (2000-02-01 to 2022-12-30)
   Val:   250 records (2023-01-03 to 2023-12-29)
   Test:  241 records (2024-01-02 to 2024-12-13)

üîß Feature selection...
   Original features: 62
   Filtered features: 59
   Removed: 3

üìä Training data:
   Train samples: 5767
   Val samples: 250
   Test samples: 241
   Features: 59
   Positive rate (train): 28.5%
   Positive rate (test): 16.6%

üéì Training ensemble model...

üîß Calibrating probabilities...
‚úÖ Model trained and calibrated

================================================================================
üìä TEST SET RESULTS (2024)
================================================================================

üéØ ROC AUC: 34.6%
üéØ Precision: 0.0%
üéØ Recall: 0.0%

Classification Report:
              precision    recall  f1-score   support

 No Pullback       0.83      1.00      0.91       201
    Pullback       0.00      0.00      0.00        40

    accuracy                           0.83       241
   macro avg       0.42      0.50      0.45       241
weighted avg       0.70      0.83      0.76       241


Confusion Matrix:
[[201   0]
 [ 40   0]]

True Negatives:  201
False Positives: 0
False Negatives: 40
True Positives:  0

================================================================================
üîç PREDICTION ANALYSIS
================================================================================

üö® High confidence warnings (>70%): 0

================================================================================
‚úÖ TRAINING COMPLETE
================================================================================

Final ROC AUC: 34.6%
Improvement from original (50.6%): -16.0 percentage points

‚ö†Ô∏è  STILL NEEDS WORK
   Recommendation: Try Phase 3 (Polygon options) or focus on mean reversion
